SET NAMES utf8mb4;
SET SESSION sql_mode = 'NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';
SET @@global.optimizer_switch='index_merge=off';

CREATE TABLE t1 (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    data BLOB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB;

CREATE TABLE t2 (
    id INT PRIMARY KEY,
    value DECIMAL(10, 2),
    status ENUM('active', 'inactive') DEFAULT 'active'
) ENGINE=Aria;

DELIMITER $$

CREATE TRIGGER trig_t1 AFTER INSERT ON t1 FOR EACH ROW
BEGIN
    INSERT INTO t2 (id, value) VALUES (NEW.id, RAND() * 100);
END$$

CREATE FUNCTION fn_test(a INT, b INT)
RETURNS INT
DETERMINISTIC
BEGIN
    RETURN a + b;
END$$

DELIMITER ;

CREATE VIEW v1 AS SELECT id, name, created_at FROM t1 WHERE name LIKE 'A%';

ALTER TABLE t1 ADD COLUMN notes TEXT;
ALTER TABLE t2 ADD CONSTRAINT chk_value CHECK (value > 0);

INSERT INTO t1 (name, data) VALUES ('Test1', HEX(RAND() * 1000));
INSERT INTO t1 (name, data) VALUES ('Test2', UUID_TO_BIN(UUID()));
INSERT INTO t1 (name, data) VALUES ('Test3', NOW());

CREATE TABLE t3 (
    id INT PRIMARY KEY,
    json_data JSON
) ENGINE=InnoDB;

INSERT INTO t3 VALUES (1, JSON_ARRAY(1, 2, 3));