DROP TABLE IF EXISTS t1;
DROP TABLE IF EXISTS t2;

CREATE TABLE t1 (
    c0 INTEGER NOT NULL,
    c1 TEXT DEFAULT '',
    c2 BLOB,
    c3 REAL,
    PRIMARY KEY (c0)
);

CREATE TABLE t2 (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE,
    value REAL CHECK(value >= 0),
    t1_id INTEGER REFERENCES t1(c0)
);

INSERT INTO t1 VALUES
(1, 'test', X'ABCD', 123.45),
(2, NULL, X'1234', -678.90);

INSERT INTO t2 (name, value, t1_id) VALUES
('item1', 100.00, 1),
('item2', 200.00, 2),
('item3', NULL, NULL);

UPDATE t1 SET c1 = 'updated' WHERE c0 = 1;
UPDATE t2 SET value = value * 2 WHERE id = 1;

SELECT DISTINCT c1 FROM t1 ORDER BY c1 DESC LIMIT 1 OFFSET 1;
SELECT COUNT(*) AS total, SUM(value) AS sum_value
FROM t2 GROUP BY name HAVING COUNT(*) > 0;

SELECT t1.c0, t2.name FROM t1 LEFT JOIN t2 ON t1.c0 = t2.t1_id
WHERE t1.c0 < 3 AND t2.value IS NOT NULL
ORDER BY t1.c0 DESC LIMIT 5;

SELECT * FROM t2 WHERE name IN (SELECT name FROM t2 WHERE value > 150);

BEGIN TRANSACTION;
INSERT INTO t1 VALUES (3, 'new', X'5678', 45.67);
UPDATE t2 SET t1_id = 3 WHERE id = 3;
COMMIT;

PRAGMA integrity_check;
PRAGMA page_size;