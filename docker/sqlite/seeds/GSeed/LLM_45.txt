PRAGMA writable_schema = 1;
PRAGMA foreign_keys = ON;

CREATE TABLE t1 (
    id INTEGER PRIMARY KEY,
    a INTEGER CONSTRAINT c1 CHECK (a > 0),
    b REAL UNIQUE,
    d TEXT NOT NULL,
    e BLOB,
    f BOOLEAN DEFAULT TRUE,
    g TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE t2 (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    x INTEGER REFERENCES t1(id) ON DELETE SET NULL,
    y TEXT CHECK (y LIKE 'prefix%'),
    z REAL UNIQUE,
    w TEXT DEFAULT ''
);
CREATE INDEX idx_t2_y ON t2(y);
CREATE INDEX idx_t2_z ON t2(z);

BEGIN TRANSACTION;
INSERT INTO t1 VALUES(1, 5, 3.14, 'test', x'0102', TRUE, CURRENT_TIMESTAMP);
INSERT INTO t1 (a, b, d) VALUES(-1, NULL, 'another');
INSERT INTO t2 (x, y, z) VALUES(1, 'prefix1', 1.5);
COMMIT;

SELECT t1.id, t1.a, t2.y FROM t1 LEFT JOIN t2 ON t1.id = t2.x WHERE t2.z > 1.0;
CREATE TRIGGER trig AFTER INSERT ON t1 BEGIN
    UPDATE t2 SET w = 'updated' WHERE x = NEW.id;
END;

ALTER TABLE t2 ADD COLUMN h INTEGER DEFAULT 42;