BEGIN TRANSACTION;
CREATE TABLE t1(a INTEGER PRIMARY KEY, b TEXT NOT NULL, c BLOB);
CREATE TABLE t2(d REAL, e TIMESTAMP DEFAULT CURRENT_TIMESTAMP, f BOOLEAN CHECK(f IN (0, 1)));
CREATE TABLE t3(g UNIQUE, h REFERENCES t1(a), i TEXT GENERATED ALWAYS AS (b || c) VIRTUAL);
CREATE TABLE t4(j INTEGER PRIMARY KEY AUTOINCREMENT, k TEXT COLLATE NOCASE);
CREATE INDEX idx_t2_d ON t2(d DESC);
CREATE INDEX idx_t3_g_h ON t3(g, h);
INSERT INTO t1 VALUES(1, 'hello', X'506179706C65');
INSERT INTO t1 VALUES(2, NULL, X'48656C6C6F');
INSERT INTO t2 VALUES(3.14, CURRENT_TIMESTAMP, 1);
INSERT INTO t2 VALUES(2.718, '2023-10-05', 0);
INSERT INTO t4(k) VALUES('test1'), ('test2'), ('test3');
CREATE VIRTUAL TABLE vt1 USING FTS5(content='t1', tokenize='porter');
CREATE VIEW v1 AS SELECT a, b FROM t1 WHERE c IS NOT NULL;
CREATE TRIGGER trg_t1 AFTER INSERT ON t1 BEGIN
    INSERT INTO t4(k) VALUES(NEW.b);
END;
WITH cte AS (
    SELECT a, b FROM t1 UNION ALL
    SELECT j, k FROM t4
)
SELECT COUNT(*) OVER(), ROW_NUMBER() OVER(ORDER BY a DESC) FROM cte;
COMMIT;